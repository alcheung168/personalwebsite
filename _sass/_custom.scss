/* ===========================================================
   Transparent Nav over Full-Bleed Hero + Glass Card (Left Text, Right Photo)
   Font: Montserrat (Thin/Light/Bold) + Parallax + Hover Effects
   =========================================================== */

/* Font */
@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;600&display=swap");

/* Tokens */
:root{
  --site-bg-base:#0d1b2a;
  --site-bg-secondary:#1b263b;
  --site-bg-tertiary:#415a77;
  --site-fg-base:#e0e1dd;
  --site-fg-dim:#b8c0cc;

  /* hero */
  --hero-h: 72vh;
  --hero-parallax: 0px; /* set by JS */

  /* card */
  --card-pad-x: 24px;
  --card-pad-y: 24px;

  /* right photo block */
  --photo-w: 240px;
  --photo-h: 300px;
}

/* Page background & base text */
html, body{
  background: var(--site-bg-base);
  color: var(--site-fg-base);
  font-family: 'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
}

/* Simple link style */
a { color: #9ec1ff; text-decoration: none; }
a:hover { text-decoration: underline; }

/* Sticky top nav transparency tweak on scroll */
html.nav-scrolled .masthead{ background: rgba(0,0,0,.25); backdrop-filter: blur(4px); }

/* ===== HERO =================================================== */

/* Parallax: hero scrolls slower than page via transform set from JS */
.page__hero--overlay{
  /* normal flow (NOT fixed), but we translate it a bit each scroll */
  transform: translateY(var(--hero-parallax));
  will-change: transform;
  transition: transform .06s linear; /* tiny smoothing */
  margin-top: 0 !important;

  min-height:60vh;                 /* visible area */
  padding-top:6rem;                /* space so the card isnâ€™t under nav */
  background-size:cover !important;
  background-position:center center;
  background-repeat:no-repeat;
  position: relative;
  z-index: 0;                      /* below the content sections */
}

/* ensure sections layer above the hero as it lags behind */
.content-section,
.page__content,
.page__inner-wrap { position: relative; z-index: 1; }

/* ---------- GLASS CARD CONTAINER ---------- */
.page__hero--overlay .wrapper{
  position: relative;
  padding: var(--card-pad-y) var(--card-pad-x);
  padding-right: calc(var(--photo-w) + var(--card-pad-x));
  min-height: calc(var(--photo-h) + (var(--card-pad-y) * 2));
  background: rgba(10,15,31,.42);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 10px 40px rgba(0,0,0,.35);
  border-radius: 18px;
  overflow: visible;

  /* 3D context for image tilt + (legacy zoom controlled below) */
  --zoom: 1;
  transform: scale(var(--zoom)); /* (overridden later) */
  transform-style: preserve-3d;
  perspective: 800px;
  transition: transform .22s ease, box-shadow .22s ease;
}

/* legacy hover zoom (will be superseded by overrides below) */
.page__hero--overlay .wrapper:hover{
  --zoom: 1.03;
  box-shadow: 0 16px 54px rgba(0,0,0,.45);
}

/* When we temporarily want *no* zoom (e.g., see-more hover), force 1 */
.page__hero--overlay .wrapper.no-zoom,
.page__hero--overlay .wrapper.no-zoom:hover{
  --zoom: 1;
}

/* ---------- LEFT TEXT / RIGHT PHOTO LAYOUT INSIDE CARD ---------- */
.page__hero--overlay .wrapper .card-content{
  position: relative;
  z-index: 2;
  max-width: 56ch;
}

.page__hero--overlay .wrapper .photo{
  position: absolute;
  right: var(--card-pad-x);
  top: var(--card-pad-y);
  width: var(--photo-w);
  height: var(--photo-h);
  border-radius: 12px;
  overflow: hidden;
  transform: translateZ(30px); /* pops slightly forward in 3D */
  box-shadow: 0 16px 44px rgba(0,0,0,.35);
}

.page__hero--overlay .wrapper .photo img{
  display:block;
  width:100%;
  height:100%;
  object-fit: cover;
  pointer-events: none; /* pointer tracked via card hitbox */
}

.page__lead {
  margin-top: 1rem;
}

.page__lead .see-more{
  display:inline-block;
  margin-top:.5rem;
  font-weight:600;
  letter-spacing:.04em;
  opacity: 1;
  transition: opacity .25s ease;
}

.page__lead .see-more.see-more-hidden{ opacity: 0; }

/* Back to top button */
.back-to-top{
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  opacity: 0;
  pointer-events: none;
  transform: translateY(8px);
  transition: opacity .2s ease, transform .2s ease;
  padding:.5rem .75rem;
  border-radius: .75rem;
  background: rgba(255,255,255,.12);
  color: #fff;
  border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(6px);
}

.back-to-top.show{
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

/* ===== Overrides: precise tilt + controlled zoom (SEE MORE safe) ===== */
.page__hero--overlay .wrapper {
  /* Base transform reads tilt variables set by JS; no base zoom */
  transform: perspective(900px)
             rotateX(var(--tiltX, 0deg))
             rotateY(var(--tiltY, 0deg));
  transition: transform 300ms ease, box-shadow 300ms ease;
}

.page__hero--overlay .wrapper:hover:not(.no-zoom) {
  /* Only zoom when the card itself is hovered and no-zoom isn't active */
  transform: perspective(900px)
             rotateX(var(--tiltX, 0deg))
             rotateY(var(--tiltY, 0deg))
             scale(1.03);
  box-shadow: 0 16px 54px rgba(0,0,0,.45);
}

.page__hero--overlay .wrapper.no-zoom:hover {
  /* While SEE MORE is hovered, keep scale neutral */
  transform: perspective(900px)
             rotateX(var(--tiltX, 0deg))
             rotateY(var(--tiltY, 0deg));
  box-shadow: 0 10px 40px rgba(0,0,0,.35);
}

/* (optional) Stable math for JS hitbox (safe if already defined elsewhere) */
.page__hero--overlay .wrapper {
  --card-pad-x: 24px;
  --card-pad-y: 24px;
}
